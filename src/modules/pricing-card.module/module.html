{% set href = module.button_link.url.href %}
{% if module.button_link.url.type is equalto "EMAIL_ADDRESS" %}
	{% set href = "mailto:" + href %}
{% endif %}
{% set rel = [] %}
{% if module.button_link.no_follow %}
	{% do rel.append("nofollow") %}
{% endif %}
{% if module.button_link.open_in_new_tab %}
	{% do rel.append("noopener") %}
{% endif %}

<section class="card card--pricing">
  {% if module.tier and module.description %}
    <div class="card__header">
      {% if module.tier %}
        <{{ module.tier_heading_type }} class="card__heading">{{ module.tier }}</{{ module.tier_heading_type }}>
      {% endif %}
      {% if module.description %}
        <p class="card__subtitle"> {{ module.description }}</p>
      {% endif %}
    </div>
  {% endif %}
  <hr>
  <div class="card__body">
    <ul>
      {% for feature in module.features %}
        <li>
          {% icon
            name='{{ module.feature_icon.name }}'
            purpose='decorative'
            style='{{ module.feature_icon.type }}'
            unicode='{{ module.feature_icon.unicode }}'
            no_wrapper=True
          %}{{ feature }}
        </li>
      {% endfor %}
    </ul>
    <hr>
    <p class="card__price">{{ module.price }}</p>
    <a class="button"
    href="{{ href }}"
    {% if module.button_link.open_in_new_tab %}target="_blank"{% endif %}
    {% if rel %}rel="{{ rel|join(" ") }}"{% endif %}>
      {{ module.button_text }}
    </a>
  </div>
</section>

<style>
{% scope_css %}
  .card {
    {# Alignment #}
    {% if module.style.alignment_spacing.alignment.horizontal_align %}
      text-align: {{ module.style.alignment_spacing.alignment.horizontal_align }};
    {% endif %}

    {# Padding & margin #}
    {{ module.style.alignment_spacing.spacing.css }}
    {% if module.style.background.bg_type == "bg_color" && module.style.background.bg_color.color %}
        background-color: {{ module.style.background.bg_color.css }};
    {% endif %}

    {# Background styles #}
    {% if module.style.background.bg_type == "bg_gradient" && module.style.background.bg_gradient.css %}
      background: {{ module.style.background.bg_gradient.css }};
    {% endif %}
    {% if module.style.background.bg_type == "bg_image" %}
      {{ module.style.background.bg_image.css }}
    {% endif %}

    {# Border #}
    {{ module.style.border.css }}

    {# Typography #}
    {% if module.style.typography.font.size %}
      font-size:{{module.style.typography.font.size.value}}{{module.style.typography.font.size.units}};
    {% endif %}
    {% if module.style.typography.font.color %}
      color: {{module.style.typography.font.color}};
    {% endif %}
    {# Font style string is missing last semicolon #}
    {% if  module.style.typography.font.style %}
      {{ module.style.typography.font.style }};
    {% endif %}
  }
{% end_scope_css%}
</style>
